(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1891:function(e,i,s){(e.exports=s(3)(!1)).push([e.i,".dropdown-menu .info,.dropdown-menu .title{color:#fff}",""])},"views/shared/ResultsTableDrillDownPopTart":function(e,i,s){var t,l;t=[s("require/underscore"),s("shim/jquery"),e,s("views/shared/PopTart"),s("models/shared/TimeRange"),s("util/time"),s("shim/splunk.util"),s("stubs/i18n"),s("views/shared/ResultsTableDrillDownPopTart.pcss")],void 0===(l=function(e,i,s,t,l,a,n,r,o){return t.extend({moduleId:s.i,className:"dropdown-menu dropdown-menu-medium",initialize:function(s){t.prototype.initialize.apply(this,arguments),this.model.spanTimeRange=new l,this.constraints={keys:[],values:[]},this.fields=this.model.results.getDataFields(),this.isTimeSpan=e.has(this.options.clickMeta,"_span"),this.fieldClicked=e.has(this.options.clickMeta,"name2")?this.options.clickMeta.name2:this.options.clickMeta.name,this.fieldValueClicked=e.has(this.options.clickMeta,"value2")?this.options.clickMeta.value2:this.options.clickMeta.value,this.fieldMetadataResults=this.convertResultFieldsToMetadata(),this.metaDataHasGroupByOrSplitBy=!e.isUndefined(e.find(this.fieldMetadataResults,(function(e){return e.groupby_rank||e.splitby_field}))),this.fieldClickedMetaData=this.fieldMetadataResults[this.fieldClicked]||{},this.cellDrilldownable=this.isCellDrilldownable(),this.hasRenderedDeferred=i.Deferred(),this.cellDrilldownable&&(this.splitbyField=this.fieldClickedMetaData?this.fieldClickedMetaData.splitby_field:void 0,this.splitbyValue=this.splitbyField?this.fieldClickedMetaData.splitby_value:void 0,!this.isTimeSpan||this.splitbyField||this.splitbyValue||(this.splitbyField=this.fieldClicked,this.splitbyValue=this.fieldValueClicked),this.fieldClickedRank=this.metaDataHasGroupByOrSplitBy?this.fieldClickedMetaData.groupby_rank:this.fields.indexOf(this.fieldClicked).toString()),this.metaDataHasGroupByOrSplitBy?this.buildConstraintsByGroupBy():this.buildConstraintsByFieldIndex(),this.isTimeSpan&&(this.timeSpanDfd=this.model.spanTimeRange.save({earliest:this.options.clickMeta.value,latest:(parseFloat(this.options.clickMeta.value)+this.options.clickMeta._span).toFixed(3)}))},convertResultFieldsToMetadata:function(){var i={},s=this.model.results.get("fields");return e(s).each((function(s){e.isObject(s)&&(i[s.name]=e(s).omit("name"))})),i},stripClickMetaToTimeRange:function(){return e.extend(e(this.options.clickMeta).omit("name2","value2"),{rowContext:e(this.options.clickMeta).pick("row._time")})},stripClickMetaToColumnOnly:function(){var s=this.options.clickMeta;return s.name2?e(s).omit("name","value","_span"):i.extend(!0,{},this.options.clickMeta)},isCellDrilldownable:function(){if("row"===this.options.clickMeta.type||"_time"===this.fieldClicked)return!1;if(this.metaDataHasGroupByOrSplitBy){if(!this.fieldClickedMetaData||!this.fieldClickedMetaData.groupby_rank&&!this.fieldClickedMetaData.splitby_field)return!1}else if(this.fieldClickedMetaData){var e=this.fieldClickedMetaData.type_special;if("count"===e||"percent"===e)return!1}return!0},buildConstraintsByGroupBy:function(){for(var e=0;e<this.fields.length;e++){var i,s=this.fields[e],t=this.fieldMetadataResults[s];if(t&&t.groupby_rank)if(i=parseInt(t.groupby_rank,10),!this.fieldClickedRank||i<this.fieldClickedRank)this.constraints.keys.push(s),this.constraints.values.push(this.options.clickMeta.rowContext["row."+s]);else{if(!this.fieldClickedRank||i!=this.fieldClickedRank)break;this.constraints.keys.push(s),this.constraints.values.push(this.fieldValueClicked)}}},buildConstraintsByFieldIndex:function(){for(var i=e.isUndefined(this.fieldClickedRank)?this.fields.length:this.fieldClickedRank,s=0;s<i;s++){var t=this.fields[s];if(this.fieldMetadataResults&&this.fieldMetadataResults[t]){var l=this.fieldMetadataResults[t].type_special;if("count"===l||"percent"===l)continue}this.constraints.keys.push(t),this.constraints.values.push(this.options.clickMeta.rowContext["row."+t])}s==this.fieldClickedRank&&(this.constraints.keys.push(this.fields[s]),this.constraints.values.push(this.fieldValueClicked))},events:{"click .time_span":function(i){var s=e.extend({},this.options.clickMeta,{type:"row"});this.fieldDrilldown(i,s)},"click .time_span_reporting":function(e){this.fieldDrilldown(e,this.stripClickMetaToTimeRange(),{stripReportsSearch:!1})},"click .splitby_curr_inc_cell":function(e){this.fieldDrilldown(e,this.options.clickMeta)},"click .curr_exc_cell":function(e){this.fieldDrilldown(e,this.stripClickMetaToColumnOnly(),{stripReportsSearch:!1,negate:!0})},"click .curr_inc_val":function(e){var i=this.stripClickMetaToColumnOnly(),s=i.name2||i.name,t=s&&this.fieldMetadataResults[s];t&&t.hasOwnProperty("groupby_rank")||this.cellDrilldownable||(i.type="row"),this.fieldDrilldown(e,i)},"click .curr_exc_val":function(e){var i=this.stripClickMetaToColumnOnly(),s=i.name2||i.name,t=s&&this.fieldMetadataResults[s];t&&t.hasOwnProperty("groupby_rank")||(i.type="row"),this.fieldDrilldown(e,i,{negate:!0})},"click .only_val":function(e){this.fieldDrilldown(e,this.stripClickMetaToColumnOnly(),{newSearch:!0})},"click .curr_inc_con":function(e){this.fieldDrilldown(e,this.options.clickMeta,{fields:this.constraints.keys,values:this.constraints.values})},"click .curr_exc_con":function(e){this.fieldDrilldown(e,this.options.clickMeta,{fields:this.constraints.keys,values:this.constraints.values,negate:!0})}},fieldDrilldown:function(e,s,t){e.preventDefault(),(t=t||{}).drilldownNewTab=i(e.currentTarget).hasClass("secondary-link"),this.trigger("drilldown",s,t),this.hide()},show:function(e,s){i.when(this.hasRenderedDeferred).then(function(){t.prototype.show.call(this,e,s)}.bind(this))},render:function(){return i.when(this.timeSpanDfd).then(function(){var i;this.$el.html(t.prototype.template_menu);var s=!this.model.spanTimeRange.isRangeSnappedToSeconds(),l=s?"YYYY-MM-dd HH:mm:ss.TTT":"YYYY-MM-dd HH:mm:ss",o=r.format_date(a.isoToDateObject(this.model.spanTimeRange.get("earliest_iso")),l),c=r.format_date(a.isoToDateObject(this.model.spanTimeRange.get("latest_iso")),l);this.isTimeSpan?(this.$el.addClass("time-span-drilldown"),s&&this.$el.removeClass("dropdown-menu-medium").addClass("dropdown-menu-wide"),i=this.cellDrilldownable?this.splitby_cell_template:this.time_span_row_template):i=this.cellDrilldownable?this.splitbyField?this.splitby_cell_template:this.cell_template:this.row_template;var d=this.compileTemplate(i),h=e("%s - Opens in a new tab").t(),p={viewEvents:e("View events").t(),otherEvents:e("Other events").t(),narrowToThisTimeRange:e("Narrow to this time range").t(),excludeFromResults:e("Exclude from results").t(),newSearch:e("New search").t()};this.$el.append(d({_:e,showConstraints:"0"!=this.fieldClickedRank&&!e.isEmpty(this.constraints.keys),constraintKeys:this.constraints.keys,constraintValues:this.constraints.values,earliest:o,latest:c,isTimeSpan:this.isTimeSpan,splitbyField:this.splitbyField,splitbyValue:this.splitbyValue,fieldClicked:this.fieldClicked,fieldValueClicked:this.fieldValueClicked,splunkUtil:n,opensInNewTab:h,messages:p})),this.hasRenderedDeferred.resolve()}.bind(this)),this},time_span_row_template:'                <ul>                    <li class="info">                        <%- splunkUtil.sprintf("%s to %s", earliest, latest) %>                    </li>                    <li>                        <a class="time_span primary-link" href="#"><%- messages.viewEvents %></a>                        <a class="time_span secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.viewEvents) %>"><i class="icon-external"></i></a>                    </li>                    <li>                        <a class="time_span_reporting primary-link" href="#"><%- messages.narrowToThisTimeRange %></a>                        <a class="time_span_reporting secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.narrowToThisTimeRange) %>"><i class="icon-external"></i></a>                    </li>                </ul>            ',splitby_cell_template:'                <% var text = splunkUtil.sprintf("%s = %s", splitbyField, splitbyValue); %>                <ul>                    <li class="info">                        <span class="field-value" title="<%- text %>"><%- text %></span>                    </li>                    <li>                        <a class="curr_exc_cell primary-link" href="#"><%- messages.excludeFromResults %></a>                        <a class="curr_exc_cell secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.excludeFromResults) %>"><i class="icon-external"></i></a>                    </li>                    <li class="info">                        <% var splitText; %>                        <% if (isTimeSpan) { %>                            <% splitText = splunkUtil.sprintf("%s to %s", earliest, latest) %>                        <% } else { %>                            <% splitText = splunkUtil.sprintf("%s = %s", constraintKeys[0], constraintValues[0]) %>                        <% } %>                        <span class="field-value" title="<%- splitText %>"><%- splitText %></span>                        <span class="field-value" title="<%- text %>"><%- text %></span>                    </li>                    <li>                        <a class="splitby_curr_inc_cell primary-link" href="#"><%- messages.viewEvents %></a>                        <a class="splitby_curr_inc_cell secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.viewEvents) %>"><i class="icon-external"></i></a>                    </li>                </ul>            ',row_template:'                <ul>                <% if (showConstraints) { %>                    <li class="info">                    <% for(var i = 0; i < constraintKeys.length; i++) { %>                        <%                            var key = constraintKeys[i],                                value = constraintValues[i],                                text = splunkUtil.sprintf("%s = %s", key, _.isArray(value) ? value.join(" | ") : value);                        %>                        <span class="field-value" title="<%- text %>"><%- text %></span>                    <% } %>                    </li>                <% } %>                    <li>                        <a class="curr_inc_val primary-link" href="#"><%- messages.viewEvents %></a>                        <a class="curr_inc_val secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.viewEvents) %>"><i class="icon-external"></i></a>                    </li>                <% if (showConstraints) { %>                    <li>                        <a class="curr_exc_val primary-link" href="#"><%- messages.otherEvents %></a>                        <a class="curr_exc_val secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.otherEvents) %>"><i class="icon-external"></i></a>                    </li>                <% } %>                </ul>            ',cell_template:'                <ul>                <% if (fieldClicked) { %>                    <li class="info">                        <% var fieldInfoText = splunkUtil.sprintf("%s = %s", fieldClicked, fieldValueClicked); %>                        <span class="field-value" title="<%- fieldInfoText %>"><%- fieldInfoText %>                    </li>                <% } %>                                    <li>                        <a class="curr_inc_val primary-link" href="#"><%- messages.viewEvents %></a>                        <a class="curr_inc_val secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.viewEvents) %>"><i class="icon-external"></i></a>                    </li>                    <li>                        <a class="curr_exc_val primary-link" href="#"><%- messages.otherEvents %></a>                        <a class="curr_exc_val secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.otherEvents) %>"><i class="icon-external"></i></a>                    </li>                    <li>                        <a class="curr_exc_cell primary-link" href="#"><%- messages.excludeFromResults %></a>                        <a class="curr_exc_cell secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.excludeFromResults) %>"><i class="icon-external"></i></a>                    </li>                    <li>                        <a class="only_val primary-link" href="#"><%- messages.newSearch %></a>                        <a class="only_val secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.newSearch) %>"><i class="icon-external"></i></a>                    </li>                                <% if (showConstraints) { %>                    <li class="info">                    <% for(var i = 0; i < constraintKeys.length; i++) { %>                        <%                            var key = constraintKeys[i],                                value = constraintValues[i],                                text = splunkUtil.sprintf("%s = %s", key, _.isArray(value) ? value.join(" | ") : value);                        %>                        <span class="field-value" title="<%- text %>"><%- text %></span>                    <% } %>                    </li>                    <li>                        <a class="curr_inc_con primary-link" href="#"><%- messages.viewEvents %></a>                        <a class="curr_inc_con secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.viewEvents) %>"><i class="icon-external"></i></a>                    </li>                    <li>                        <a class="curr_exc_con primary-link" href="#"><%- messages.otherEvents %></a>                        <a class="curr_exc_con secondary-link" href="#" aria-label="<%- splunkUtil.sprintf(opensInNewTab, messages.otherEvents) %>"><i class="icon-external"></i></a>                    </li>                <% } %>                </ul>            '})}.apply(i,t))||(e.exports=l)},"views/shared/ResultsTableDrillDownPopTart.pcss":function(e,i,s){var t=s(1891);"string"==typeof t&&(t=[[e.i,t,""]]);var l={sourceMap:!1,hmr:!0,transform:void 0,insertInto:void 0};s(4)(t,l);t.locals&&(e.exports=t.locals)},"views/shared/ResultsTableDrilldown":function(e,i,s){var t,l;t=[s("shim/jquery"),s("require/underscore"),e,s("views/shared/results_table/ResultsTableMaster"),s("views/shared/ResultsTableDrillDownPopTart"),s("views/shared/delegates/Modalize"),s("util/keyboard")],void 0===(l=function(e,i,s,t,l,a,n){return t.extend({moduleId:s.i,initialize:function(){this.options.splitHighlight=!1,this.children.modalize=new a({el:this.el,tbody:"tbody"}),this.model.state.set("isModalized",!1),this.pendingUpdate=!1,t.prototype.initialize.call(this,this.options)},events:e.extend({},t.prototype.events,{"keydown tbody tr":function(i){if(i.which===n.KEYS.TAB&&this.model.state.get("isModalized")){var s="row"===this.model.config.get("display.statistics.drilldown");n.handleCircularTabbing(e(i.target).closest("tr"),i,s)}}}),startListening:function(){t.prototype.startListening.apply(this,arguments),this.listenTo(this.children.modalize,"unmodalize",(function(){this.model.state.set("isModalized",!1),this.pendingUpdate&&(this.pendingUpdate=!1,this.invalidate("updateViewPass"))})),this.listenTo(this.model.state,"change:isModalized",(function(e,i){i||(this.children.tableDock&&this.children.tableDock.enable(),this.children.modalize.debouncedCleanup())}))},deactivate:function(e){return this.active?(this.model.state.set("isModalized",!1),this.pendingUpdate=!1,t.prototype.deactivate.apply(this,arguments)):t.prototype.deactivate.apply(this,arguments)},emitDrilldownEvent:function(s){var t,a,n,r=e(s.originalEvent.target),o="row"===s.type,c=!1;if(o?(t=r.closest("tr"),a=r.is("tr")?r.find("td[data-cell-index]").first():r.closest("td")):a=t=r,this.children.resultsTableDrillDownPopTart){var d=this.children.resultsTableDrillDownPopTart.shown;if(this.children.resultsTableDrillDownPopTart.hide(),this.children.resultsTableDrillDownPopTart.remove(),this.stopListening(this.children.resultsTableDrillDownPopTart),delete this.children.resultsTableDrillDownPopTart,d)return}this.model.state.get("isModalized")||(this.model.state.set("isModalized",!0),this.children.tableDock&&this.children.tableDock.disable(),this.children.modalize.debouncedShow(s.rowIndex)),o||(c=(n=e.trim(r.text()))&&!r.children().length),c&&(a.html(e("<span>").text(n)),a=a.find("span")),this.children.resultsTableDrillDownPopTart=new l({clickMeta:s,onHiddenRemove:!0,model:{application:this.model.application,results:this.model.searchData},scrollContainer:a.closest(".results-table"),ignoreToggleMouseDown:!0}),c&&this.listenToOnce(this.children.resultsTableDrillDownPopTart,"hidden",(function(){r.text(n)})),this.children.resultsTableDrillDownPopTart.render().appendTo(e("body")).show(a,{$toggle:t}),this.listenTo(this.children.resultsTableDrillDownPopTart,"drilldown",i.bind(this.trigger,this,"drilldown"))},updateView:function(){this.model.state.get("isModalized")?this.pendingUpdate=!0:t.prototype.updateView.apply(this,arguments)}})}.apply(i,t))||(e.exports=l)}}]);